## Refine Popup & Toolbar Enhancements
 
 ## Overview
 ржмрж░рзНрждржорж╛ржи ржлрзЛржХрж╛рж╕: ржПржХрзНрж╕ржЯрзЗржирж╢ржи рж╕рж╛ржЗржи-ржЗржи рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рж╛ `/login` рж░рзБржЯрзЗ 404 рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржиред

  - `studio/src/app/login/page.tsx` рж░рзБржЯржЯрж┐ рждрзИрж░рж┐/ржирж┐рж╢рзНржЪрж┐рждржХрж░ржгред
  - Next.js ржбрзЗржн рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржХрж░рзЗ ржирждрзБржи рж░рзБржЯ ржкрж┐ржХ-ржЖржк ржирж┐рж╢рзНржЪрж┐рждржХрж░ржгред
  - ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржкржкржЖржкрзЗрж░ Sign in ржмрж╛ржЯржи ржерзЗржХрзЗ `/login` ржУржкрзЗржи ржУ рж╕ржлрж▓ рж▓ржЧржЗржи ржнрзЗрж░рж┐ржлрж╛ржЗред
  - ржкрзНрж░рзЯрзЛржЬржи рж╣рж▓рзЗ `?next=` ржХрзБрзЯрзЗрж░рж┐ рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗ рж╕ржлрж▓ рж▓ржЧржЗржирзЗрж░ ржкрж░ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯред
 
 ## Plan
 ### Phase 1: Routing Fix

 #### Task 1.1: Create `/login` Page
 - Requirement: App Router-ржП рж╕рзНржЯрзНржпрж╛ржирзНржбржЕрзНржпрж╛рж▓рзЛржи `/login` ржкрзЗржЬ; `?next=` рж╕рж╛ржкрзЛрж░рзНржЯ; `LoginForm` ржмрзНржпржмрж╣рж╛рж░; рж╕рж╛ржХрж╕рзЗрж╕рзЗ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯред
 - Design: `studio/src/app/login/page.tsx` client ржкрзЗржЬ; `useSearchParams` ржжрж┐рзЯрзЗ `next` ржкржбрж╝рж╛; `useRouter.push(next||'/')`ред
 - Subtasks (Plan):
   - [x] 1.1.1: `studio/src/app/login/page.tsx` рждрзИрж░рж┐ (client) + heading/descriptionред
   - [x] 1.1.2: `?next=` ржкржбрж╝рзЗ рж╕рж╛ржХрж╕рзЗрж╕рзЗ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯред
   - [ ] 1.1.3: ржмрзЗрж╕рж┐ржХ UI copy/style ржЯрж┐ржЙржи (ржРржЪрзНржЫрж┐ржХ)ред

 #### Task 1.2: Dev Server Recognition
 - Requirement: ржбрзЗржн рж╕рж╛рж░рзНржнрж╛рж░ ржирждрзБржи рж░рзБржЯ ржкрж┐ржХ-ржЖржк ржХрж░рзЗ; `/login` ржЖрж░ 404 ржирзЯред
 - Design: Next dev рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ; `.next/server/app-paths-manifest.json` ржП `/login` ржПржирзНржЯрзНрж░рж┐ ржЪрзЗржХред
 - Subtasks (Plan):
   - [ ] 1.2.1: Dev рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ (ржкрзЛрж░рзНржЯ 9003/9010 ржХржиржлрж┐ржЧ ржорж╛ржлрж┐ржХ)ред
   - [ ] 1.2.2: `/login` ржбрж╛ржЗрж░рзЗржХрзНржЯ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржнрзЗрж░рж┐ржлрж╛ржЗ + ржорзНржпрж╛ржирж┐ржлрзЗрж╕рзНржЯ ржПржирзНржЯрзНрж░рж┐ ржХржиржлрж╛рж░рзНржоред

 ### Phase 2: Integration

 #### Task 2.1: Extension Redirect E2E
 - Requirement: ржкржкржЖржк Sign in тЖТ `${base}/login` ржЯрзНржпрж╛ржм ржУржкрзЗржи; рж╕рж╛ржХрж╕рзЗрж╕рзЗ рж╣рзЛржо/`next` ржлрж┐рж░рзЗ ржЖрж╕рзЗред
 - Design: `chrome.tabs.create`; рж╕рж╛ржЗржи-ржЗржи рж╢рзЗрж╖рзЗ `router.push(nextOrRoot)`ред
 - Subtasks (Plan):
   - [ ] 2.1.1: Popup ржмрж╛ржЯржи ржЯрзЗрж╕рзНржЯ (ржирждрзБржи ржЯрзНржпрж╛ржм `/login`)ред
   - [ ] 2.1.2: E2E рж╕рж╛ржЗржи-ржЗржи рж╕рзНржорзЛржХ ржЯрзЗрж╕рзНржЯред

 #### Task 2.2: Optional Safe Redirect
 - Requirement: `next` рж╢рзБржзрзБржорж╛рждрзНрж░ ржЗржи-ржЕрзНржпрж╛ржк ржкрже (leading `/`) рж╣рж▓рзЗ ржЧрзНрж░рж╣ржгржпрзЛржЧрзНржпред
 - Design: ржкрзЗржЬрзЗ рж▓рж╛ржЗржЯржУрзЯрзЗржЯ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи; ржПржХрзНрж╕ржЯрж╛рж░рзНржирж╛рж▓ URL ржмрзНрж▓ржХред
 - Subtasks (Plan):
   - [ ] 2.2.1: `next` ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи/рж╕рзНржпрж╛ржирж┐ржЯрж╛ржЗржЬ ржпрзЛржЧред

  ## Completed
   - **ржХржиржЯрзЗржХрзНрж╕ржЯ ржорзЗржирзБ ржУ ржЯрзБрж▓ржмрж╛рж░рзЗ ржкрж┐ржи UX ржлрж╛ржЗржирж╛рж▓рж╛ржЗржЬ**:
   - `MonicaStyleContextMenu.ts`: "Copy Selection" ржЕрзНржпрж╛ржХрж╢ржи рж░рж┐ржорзБржн, ржкрж┐ржи ржЯржЧрж▓ ржЖржЗржХржиржХрзЗ ржкрзВрж░рзНржмрзЗрж░ memo (Heroicons) ржЖржЗржХржирзЗ рж░рж┐ржкрзНрж▓рзЗрж╕, рж╕рж░рзНржмрзЛржЪрзНржЪ ржкрж┐ржи рж▓рж┐ржорж┐ржЯ рзк тЖТ рзп ржХрж░рж╛; ржбрж┐ржлрж▓рзНржЯ ржкрж┐ржиржб рзк ржерж╛ржХржмрзЗред
   - `MonicaStyleToolbar.ts`: ржЯрзБрж▓ржмрж╛рж░ рзп ржкрж░рзНржпржирзНржд ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯ/рж▓рзЛржб рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░ржмрзЗ; UI рж░рзЛ-рждрзЗ ржбрж┐ржлрж▓рзНржЯ рзк ржжрзЗржЦрж╛ржмрзЗ; ржкрж┐ржи ржЖржЗржХржи ржХрзЗржмрж▓ ржкрж┐ржиржб рж╣рж▓рзЗ ржжрзЗржЦрж╛ржмрзЗред
   - **рж╕рзНржЯрзЛрж░рзЗржЬ/ржорзЗрж╕рзЗржЬрж┐ржВ ржлрзНрж▓рзЛ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи**:
   - `chrome.storage.sync` ржХрзА `'desainr.pinnedActions'`; `SAVE_PINNED_ACTIONS` ржмрзНрж░ржбржХрж╛рж╕рзНржЯ ржХрж╛ржЬ ржХрж░рзЗред
   - ржХржиржЯрзЗржХрзНрж╕ржЯ ржорзЗржирзБ ржЯржЧрж▓ тЖТ рж╕рзНржЯрзЛрж░ ржЖржкржбрзЗржЯ тЖТ ржЯрзБрж▓ржмрж╛рж░ рж░рж┐ржлрзНрж░рзЗрж╢ред
   - **MagicInput ржЪрж╛рж▓рзБ**:
   - ржЙржжрзНржжрзЗрж╢рзНржптАФmemo ржЖржЗржХржи/pin limit рзп UX/toolbar icon visibility ржмрж┐рж╖рзЯрзЗ ржлрж╛ржЗржирж╛рж▓ ржХржиржлрж╛рж░рзНржорзЗрж╢ржи рж╕ржВржЧрзНрж░рж╣ред
   - ржХржиржлрж╛рж░рзНржорзЗрж╢ржирзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржЫрзЛржЯржЦрж╛ржЯрзЛ polish fix тЖТ рж░рж┐ржмрж┐рж▓рзНржб (Vite) тЖТ Chrome-ржП рж░рж┐рж▓рзЛржбред
   - **ржХрзНрж░рж╕-рж╕рж╛ржЗржЯ QA**:
   - Gmail, Google Docs (iframe), News, GitHubтАФzoom/theme ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗрж╢ржирзЗред
   - **ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯрзЗржирзНрж╕/ржмрзНрж░ржбржХрж╛рж╕рзНржЯрж┐ржВ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи**:
   - `chrome.storage.sync` ржХрзЛржЯрж╛рзЯ рж╕рзЗржл; ржкрзЗржЬ рж░рж┐рж▓рзЛржб/ржирждрзБржи ржЯрзНржпрж╛ржмрзЗ рж╕рзНржЯрзЗржЯ ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯрзЗржирзНрж╕ ржарж┐ржХ ржЖржЫрзЗред
   - **ржЕрж░рзНржбрж╛рж░ рж╕рзЗржорзНржпрж╛ржирзНржЯрж┐ржХрзНрж╕**:
   - ржкрж┐ржиржб рж░рзЗржирзНржбрж╛рж░ ржмрзЗрж╕ рж▓рж┐рж╕рзНржЯрзЗрж░ ржЕрж░рзНржбрж╛рж░ ржорзЗржЗржиржЯрзЗржЗржиред
   - **ржЯрзБрж▓ржмрж╛рж░ ржнрж┐ржЬрж┐ржмрж┐рж▓рж┐ржЯрж┐ рж░рзБрж▓**:
   - ржЯрзБрж▓ржмрж╛рж░ рж░рзЛ-рждрзЗ ржкрж┐ржи ржЖржЗржХржи рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрж┐ржиржб рж╣рж▓рзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ ржХрж┐ржирж╛ ржнрзЗрж░рж┐ржлрж╛ржЗред
   - `MonicaStyleOverlay.tsx`: React-based ржЪрзНржпрж╛ржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ (ржоржбрзЗрж▓ рж╕рж┐рж▓рзЗржХрзНржЯрж░, ржХрзБржЗржХ рж╕рж╛ржЬрзЗрж╢ржи, ржЧрзНрж░рзЗржбрж┐ржпрж╝рзЗржирзНржЯ ржбрж┐ржЬрж╛ржЗржи)
   - `MonicaStyleToolbar.ts`: рж╕рж┐рж▓рзЗржХрж╢ржи ржЯрзБрж▓ржмрж╛рж░ (ржХржоржкрзНржпрж╛ржХрзНржЯ, ржлрж┐ржЪрж╛рж░рзНржб ржЕрзНржпрж╛ржХрж╢ржи, рж╣рзЛржнрж╛рж░ ржЗржлрзЗржХрзНржЯ)
 - **contentScript.ts ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи**:
   - ржирждрзБржи Monica-рж╕рзНржЯрж╛ржЗрж▓ ржЯрзЛрж╕рзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо (ржЖржЗржХржи, ржХрж╛рж▓рж╛рж░ ржХрзЛржбрж┐ржВ, рж╕рзНржорзБрже ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи)
   - Monica-рж╕рзНржЯрж╛ржЗрж▓ Undo/Copy ржмрж╛ржЯржи (ржЧрзНрж░рзЗржбрж┐ржпрж╝рзЗржирзНржЯ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб, ржЙржирзНржиржд ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржи)
   - `handleMonicaAction()` ржлрж╛ржВрж╢ржи рж╕ржм ржЕрзНржпрж╛ржХрж╢ржи рж░рж╛ржЙржЯрж┐ржВ рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рзЗ
   - ржХржиржЯрзЗржХрзНрж╕ржЯ ржорзЗржирзБ ржУ ржЯрзБрж▓ржмрж╛рж░ ржЗржнрзЗржирзНржЯ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи
 - **ржбрж┐ржЬрж╛ржЗржи ржПржирж╣рж╛ржирзНрж╕ржорзЗржирзНржЯ**:
   - Monica AI-ржПрж░ ржЪрзЗржпрж╝рзЗ ржЙржирзНржиржд ржнрж┐ржЬрзБржпрж╝рж╛рж▓ рж╣рж╛ржпрж╝рж╛рж░рж╛рж░рзНржХрж┐
   - ржлрж┐ржЪрж╛рж░ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐ (Quick Actions, Content Tools, AI Chat, Advanced)
   - рж░рзЗрж╕ржкржирж╕рж┐ржн ржбрж┐ржЬрж╛ржЗржи ржУ ржорзЛржмрж╛ржЗрж▓ ржЕржкржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи
   - ржмрзНрж░рж┐ржжрж┐ржВ ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи ржУ ржЧрзНрж▓рзЛ ржЗржлрзЗржХрзНржЯ
   - рж╕рж░рзНржмрж╢рзЗрж╖ ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржлрзНрж▓рзЛ ржЖржкржбрзЗржЯ:
     - ржбрзЗржн рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж▓ржЫрзЗ: `http://localhost:9010` (Next.js)ред ржХрж╛ржирзЗржХрзНржЯ ржкрзЗржЬ `localhost`-ржП ржЦрзБрж▓рзЗ ржжрзЗржЦрзБржи (127.0.0.1 рж╣рж▓рзЗ ржкрзЗржЬ ржирж┐ржЬрзЗ ржерзЗржХрзЗржЗ `localhost`-ржП рж╕рзБржЗржЪ ржХрж░ржмрзЗ)ред
     - ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржкржкржЖржк тЖТ рж╕рж╛ржЗржи ржЗржи (WebAuthFlow) ржЪрж╛рж▓рж╛ржи; ржЙржЗржирзНржбрзЛржЯрж┐ ржЕржЯрзЛ ржЧрзБржЧрж▓ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржирзЗржмрзЗред
     - ржХрж╛ржЬ ржирж╛ рж╣рж▓рзЗ:
       - ржХрзНрж░рзЛржо ржбрзЗржнржЯрзБрж▓рж╕ ржХржирж╕рзЛрж▓ (ржкржкржЖржк) ржерзЗржХрзЗ `Redirect URL:`/`Auth URL:` ржХржкрж┐ ржжрж┐ржиред
       - `chrome.storage.local.remove('DESAINR_BASE_URL')` ржЪрж╛рж▓рж┐рзЯрзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи (рж╕рзНржЯрзЛрж░ржб 127.0.0.1 ржкрзНрж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржерж╛ржХрж▓рзЗ ржХрзНрж▓рж┐ржи рж╣ржмрзЗ)ред
       - ржХрзНрж░рзЛржорж┐ржпрж╝рж╛ржо/ржХрзНрж░рзЛржо-ржП `accounts.google.com` ржХрзБржХрж┐ржЬ ржмрзНрж▓ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рзБржи; ad-blocker/3p cookies ржмрзНрж▓ржХ ржерж╛ржХрж▓рзЗ ржЕрж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ allow ржХрж░рзБржиред
     - рж╕ржлрж▓ рж╣рж▓рзЗ token exchange тЖТ Firebase sign-in тЖТ `chrome.storage.local` ржХрзА (uid/idToken/signedInAt) рж╕рзЗржЯ ржЖржЫрзЗ ржХрж┐ржирж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржиред
   - ржЗржЙржЬрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзЗржЫрзЗржи: WebAuthFlow E2E рж╕ржлрж▓; рж▓ржЧржЗржи ржПржЦржи ржХрж╛ржЬ ржХрж░ржЫрзЗред
   - `extension/public/manifest.json`: content script `<all_urls>` + `run_at: document_idle`, ржкрзНрж░рзЯрзЛржЬржирзАрзЯ permissions/host_permissions ржХржиржлрж╛рж░рзНржоред
   - `extension/vite.content.config.ts`: IIFE + `inlineDynamicImports: true` ржирж┐рж╢рзНржЪрж┐рждтАФoverlay ржбрж╛рзЯржирж╛ржорж┐ржХ ржЗржоржкрзЛрж░рзНржЯ ржмрж╛ржирзНржбрзЗрж▓рзЗ ржорж┐рж╢рзЗ ржЧрзЗржЫрзЗред
   - `extension/dist/contentScript.js`: `TOGGLE_OVERLAY` рж▓рж┐рж╕рзЗржирж╛рж░ ржУ `Overlay failed:` ржлрж▓ржмрзНржпрж╛ржХ ржЯрзЗржХрзНрж╕ржЯ ржЙржкрж╕рзНржерж┐ржд; React overlay ржорж╛ржЙржирзНржЯ ржХрзЛржб ржмрж╛ржирзНржбрзЗрж▓рзЗ ржЖржЫрзЗред
   - `extension/src/contentScript.ts`: `ensureToolbar()`/ржкрж┐ржиржб ржЕрзНржпрж╛ржХрж╢ржи/ржорзЗржирзБ/рж╕рж┐рж▓рзЗржХрж╢ржи ржЗржнрзЗржирзНржЯ ржХрзЛржб рж░рж┐ржнрж┐ржЙ рж╕ржорзНржкржирзНржи (ржбрж╛рзЯрж╛ржЧржирж╕рзНржЯрж┐ржХ ржирзЛржЯ рж╕ржВржЧрзНрж░рж╣)ред
   - PING/PONG рж╣рзНржпрж╛ржирзНржбрж╢рзЗржХ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯрзЗржб:
     - `contentScript.ts`: `PING` рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ `{ ok: true, source: 'content', href }` рж░рзЗрж╕ржкржирзНрж╕ ржХрж░рзЗ; `CONTEXT_MENU`/`SAVE_PINNED_ACTIONS` рж░рж┐рж╕рж┐ржн рж▓ржЧ ржпрзЛржЧред
   - Build verification:
     - `extension/dist/contentScript.js`-ржП ржкрзНрж░рж╛ржержорж┐ржХ `onMessage` рж▓рж┐рж╕рзЗржирж╛рж░рзЗ `PING` ржУ `TOGGLE_OVERLAY (early)` рж╕рзНржЯрзНрж░рж┐ржВ ржжрзГрж╢рзНржпржорж╛ржитАФржорж┐ржирж┐ржлрж╛ржпрж╝рзЗржб ржЖржЙржЯржкрзБржЯрзЗржУ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржЙржкрж╕рзНржерж┐рждред
   - рж╕рж░рзНржмрж╢рзЗрж╖ ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржлрзНрж▓рзЛ ржЖржкржбрзЗржЯ:
     - ржбрзЗржн рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж▓ржЫрзЗ: `http://localhost:9010` (Next.js)ред ржХрж╛ржирзЗржХрзНржЯ ржкрзЗржЬ `localhost`-ржП ржЦрзБрж▓рзЗ ржжрзЗржЦрзБржи (127.0.0.1 рж╣рж▓рзЗ ржкрзЗржЬ ржирж┐ржЬрзЗ ржерзЗржХрзЗржЗ `localhost`-ржП рж╕рзБржЗржЪ ржХрж░ржмрзЗ)ред
     - ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржкржкржЖржк тЖТ рж╕рж╛ржЗржи ржЗржи (WebAuthFlow) ржЪрж╛рж▓рж╛ржи; ржЙржЗржирзНржбрзЛржЯрж┐ ржЕржЯрзЛ ржЧрзБржЧрж▓ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржирзЗржмрзЗред
     - ржХрж╛ржЬ ржирж╛ рж╣рж▓рзЗ:
       - ржХрзНрж░рзЛржо ржбрзЗржнржЯрзБрж▓рж╕ ржХржирж╕рзЛрж▓ (ржкржкржЖржк) ржерзЗржХрзЗ `Redirect URL:`/`Auth URL:` ржХржкрж┐ ржжрж┐ржиред
       - `chrome.storage.local.remove('DESAINR_BASE_URL')` ржЪрж╛рж▓рж┐рзЯрзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи (рж╕рзНржЯрзЛрж░ржб 127.0.0.1 ржкрзНрж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржерж╛ржХрж▓рзЗ ржХрзНрж▓рж┐ржи рж╣ржмрзЗ)ред
       - ржХрзНрж░рзЛржорж┐ржпрж╝рж╛ржо/ржХрзНрж░рзЛржо-ржП `accounts.google.com` ржХрзБржХрж┐ржЬ ржмрзНрж▓ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рзБржи; ad-blocker/3p cookies ржмрзНрж▓ржХ ржерж╛ржХрж▓рзЗ ржЕрж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ allow ржХрж░рзБржиред
     - рж╕ржлрж▓ рж╣рж▓рзЗ token exchange тЖТ Firebase sign-in тЖТ `chrome.storage.local` ржХрзА (uid/idToken/signedInAt) рж╕рзЗржЯ ржЖржЫрзЗ ржХрж┐ржирж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржиред
   - ржЗржЙржЬрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзЗржЫрзЗржи: WebAuthFlow E2E рж╕ржлрж▓; рж▓ржЧржЗржи ржПржЦржи ржХрж╛ржЬ ржХрж░ржЫрзЗред
   - `extension/public/manifest.json`: content script `<all_urls>` + `run_at: document_idle`, ржкрзНрж░рзЯрзЛржЬржирзАрзЯ permissions/host_permissions ржХржиржлрж╛рж░рзНржоред
   - `extension/vite.content.config.ts`: IIFE + `inlineDynamicImports: true` ржирж┐рж╢рзНржЪрж┐рждтАФoverlay ржбрж╛рзЯржирж╛ржорж┐ржХ ржЗржоржкрзЛрж░рзНржЯ ржмрж╛ржирзНржбрзЗрж▓рзЗ ржорж┐рж╢рзЗ ржЧрзЗржЫрзЗред
   - `extension/dist/contentScript.js`: `TOGGLE_OVERLAY` рж▓рж┐рж╕рзЗржирж╛рж░ ржУ `Overlay failed:` ржлрж▓ржмрзНржпрж╛ржХ ржЯрзЗржХрзНрж╕ржЯ ржЙржкрж╕рзНржерж┐ржд; React overlay ржорж╛ржЙржирзНржЯ ржХрзЛржб ржмрж╛ржирзНржбрзЗрж▓рзЗ ржЖржЫрзЗред
   - `extension/src/contentScript.ts`: `ensureToolbar()`/ржкрж┐ржиржб ржЕрзНржпрж╛ржХрж╢ржи/ржорзЗржирзБ/рж╕рж┐рж▓рзЗржХрж╢ржи ржЗржнрзЗржирзНржЯ ржХрзЛржб рж░рж┐ржнрж┐ржЙ рж╕ржорзНржкржирзНржи (ржбрж╛рзЯрж╛ржЧржирж╕рзНржЯрж┐ржХ ржирзЛржЯ рж╕ржВржЧрзНрж░рж╣)ред
   - PING/PONG рж╣рзНржпрж╛ржирзНржбрж╢рзЗржХ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯрзЗржб:
     - `contentScript.ts`: `PING` рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ `{ ok: true, source: 'content', href }` рж░рзЗрж╕ржкржирзНрж╕ ржХрж░рзЗ; `CONTEXT_MENU`/`SAVE_PINNED_ACTIONS` рж░рж┐рж╕рж┐ржн рж▓ржЧ ржпрзЛржЧред
   - Build verification:
     - `extension/dist/contentScript.js`-ржП ржкрзНрж░рж╛ржержорж┐ржХ `onMessage` рж▓рж┐рж╕рзЗржирж╛рж░рзЗ `PING` ржУ `TOGGLE_OVERLAY (early)` рж╕рзНржЯрзНрж░рж┐ржВ ржжрзГрж╢рзНржпржорж╛ржитАФржорж┐ржирж┐ржлрж╛ржпрж╝рзЗржб ржЖржЙржЯржкрзБржЯрзЗржУ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржЙржкрж╕рзНржерж┐рждред
   - рж╕рж░рзНржмрж╢рзЗрж╖ ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржлрзНрж▓рзЛ ржЖржкржбрзЗржЯ:
     - ржбрзЗржн рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж▓ржЫрзЗ: `http://localhost:9010` (Next.js)ред ржХрж╛ржирзЗржХрзНржЯ ржкрзЗржЬ `localhost`-ржП ржЦрзБрж▓рзЗ ржжрзЗржЦрзБржи (127.0.0.1 рж╣рж▓рзЗ ржкрзЗржЬ ржирж┐ржЬрзЗ ржерзЗржХрзЗржЗ `localhost`-ржП рж╕рзБржЗржЪ ржХрж░ржмрзЗ)ред
     - ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржкржкржЖржк тЖТ рж╕рж╛ржЗржи ржЗржи (WebAuthFlow) ржЪрж╛рж▓рж╛ржи; ржЙржЗржирзНржбрзЛржЯрж┐ ржЕржЯрзЛ ржЧрзБржЧрж▓ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржирзЗржмрзЗред
     - ржХрж╛ржЬ ржирж╛ рж╣рж▓рзЗ:
       - ржХрзНрж░рзЛржо ржбрзЗржнржЯрзБрж▓рж╕ ржХржирж╕рзЛрж▓ (ржкржкржЖржк) ржерзЗржХрзЗ `Redirect URL:`/`Auth URL:` ржХржкрж┐ ржжрж┐ржиред
       - `chrome.storage.local.remove('DESAINR_BASE_URL')` ржЪрж╛рж▓рж┐рзЯрзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи (рж╕рзНржЯрзЛрж░ржб 127.0.0.1 ржкрзНрж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржерж╛ржХрж▓рзЗ ржХрзНрж▓рж┐ржи рж╣ржмрзЗ)ред
       - ржХрзНрж░рзЛржорж┐ржпрж╝рж╛ржо/ржХрзНрж░рзЛржо-ржП `accounts.google.com` ржХрзБржХрж┐ржЬ ржмрзНрж▓ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рзБржи; ad-blocker/3p cookies ржмрзНрж▓ржХ ржерж╛ржХрж▓рзЗ ржЕрж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ allow ржХрж░рзБржиред
     - рж╕ржлрж▓ рж╣рж▓рзЗ token exchange тЖТ Firebase sign-in тЖТ `chrome.storage.local` ржХрзА (uid/idToken/signedInAt) рж╕рзЗржЯ ржЖржЫрзЗ ржХрж┐ржирж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржиред
   - ржЗржЙржЬрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзЗржЫрзЗржи: WebAuthFlow E2E рж╕ржлрж▓; рж▓ржЧржЗржи ржПржЦржи ржХрж╛ржЬ ржХрж░ржЫрзЗред
   - `extension/public/manifest.json`: content script `<all_urls>` + `run_at: document_idle`, ржкрзНрж░рзЯрзЛржЬржирзАрзЯ permissions/host_permissions ржХржиржлрж╛рж░рзНржоред
   - `extension/vite.content.config.ts`: IIFE + `inlineDynamicImports: true` ржирж┐рж╢рзНржЪрж┐рждтАФoverlay ржбрж╛рзЯржирж╛ржорж┐ржХ ржЗржоржкрзЛрж░рзНржЯ ржмрж╛ржирзНржбрзЗрж▓рзЗ ржорж┐рж╢рзЗ ржЧрзЗржЫрзЗред
   - `extension/dist/contentScript.js`: `TOGGLE_OVERLAY` рж▓рж┐рж╕рзЗржирж╛рж░ ржУ `Overlay failed:` ржлрж▓ржмрзНржпрж╛ржХ ржЯрзЗржХрзНрж╕ржЯ ржЙржкрж╕рзНржерж┐ржд; React overlay ржорж╛ржЙржирзНржЯ ржХрзЛржб ржмрж╛ржирзНржбрзЗрж▓рзЗ ржЖржЫрзЗред
   - `extension/src/contentScript.ts`: `ensureToolbar()`/ржкрж┐ржиржб ржЕрзНржпрж╛ржХрж╢ржи/ржорзЗржирзБ/рж╕рж┐рж▓рзЗржХрж╢ржи ржЗржнрзЗржирзНржЯ ржХрзЛржб рж░рж┐ржнрж┐ржЙ рж╕ржорзНржкржирзНржи (ржбрж╛рзЯрж╛ржЧржирж╕рзНржЯрж┐ржХ ржирзЛржЯ рж╕ржВржЧрзНрж░рж╣)ред
   - PING/PONG рж╣рзНржпрж╛ржирзНржбрж╢рзЗржХ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯрзЗржб:
     - `contentScript.ts`: `PING` рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ `{ ok: true, source: 'content', href }` рж░рзЗрж╕ржкржирзНрж╕ ржХрж░рзЗ; `CONTEXT_MENU`/`SAVE_PINNED_ACTIONS` рж░рж┐рж╕рж┐ржн рж▓ржЧ ржпрзЛржЧред
   - Build verification:
     - `extension/dist/contentScript.js`-ржП ржкрзНрж░рж╛ржержорж┐ржХ `onMessage` рж▓рж┐рж╕рзЗржирж╛рж░рзЗ `PING` ржУ `TOGGLE_OVERLAY (early)` рж╕рзНржЯрзНрж░рж┐ржВ ржжрзГрж╢рзНржпржорж╛ржитАФржорж┐ржирж┐ржлрж╛ржпрж╝рзЗржб ржЖржЙржЯржкрзБржЯрзЗржУ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржЙржкрж╕рзНржерж┐рждред

  - ЁЯРЫ **Hover Misalignment Fix:** `.toolbar-action:hover`/`.more-button:hover` ржерзЗржХрзЗ translateY рж╕рж░рж╛ржирзЛ; `.action-icon` flex-center ржХрж░рзЗ dot/ржЖржЗржХржи рж╕рзЗржирзНржЯрж╛рж░ ржирж┐рж╢рзНржЪрж┐ржд
  - ЁЯЫая╕П **Context Menu Fullscreen Fix:** `.monica-menu` base CSS (position: fixed, min/max size, shadow, pointer-events: auto) ржпрзЛржЧ; ржПржЦржи `More` ржмрж╛ржЯржирзЗрж░ ржирж┐ржЪрзЗ ржЕрзНржпрж╛ржЩрзНржХрж░ рж╣рзЯ
  - ЁЯФД **Rebuild:** dist/contentScript.js (321.40 kB)
  - тЬЕ **Decision (MagicInput):** Vertical scrollbar тАФ Option A (ржорж┐ржирж┐ржорж╛рж▓ ржерж┐ржоржб) рж░рж╛ржЦржмред
  - тЬЕ **User Check:** Context menu anchoring/overflow тАФ "it's fine" (ржПржЦржи ржХрзЛржирзЛ ржкрж░рж┐ржмрж░рзНрждржи ржжрж░ржХрж╛рж░ ржирзЗржЗ)ред
  - тЬЕ **Design Choice:** Icons/Fonts тАФ "do what best match with our design" тЖТ ржЖржкрж╛рждржд ржмрж░рзНрждржорж╛ржи Inter + ржмрж┐ржжрзНржпржорж╛ржи ржЖржЗржХржи рж╕рзЗржЯ рж░рж╛ржЦржЫрж┐; ржЪрж╛ржЗрж▓рзЗ Heroicons Outline/Rubik/Poppins-ржП рж╕рзБржЗржЪ ржХрж░ржмред
  - ЁЯОи **Toolbar/Context Menu Icon Refresh:** рж╕ржм ржЕрзНржпрж╛ржХрж╢ржи ржЖржЗржХржиржХрзЗ Heroicons outline рж╕рзНржЯрж╛ржЗрж▓рзЗ ржЖржкржбрзЗржЯ (via `FeatureIcons`); stroke-ржнрж┐рждрзНрждрж┐ржХ SVG рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржЯрж┐ржЙржи ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред
  - тАв **More ржмрж╛ржЯржи:** ржЯрзЗржХрзНрж╕ржЯ ржЧрзНрж▓рж┐ржл (тЛп) ржмрж╛ржж ржжрж┐рзЯрзЗ SVG рждрж┐ржи-ржбржЯ ржмрзНржпржмрж╣рж╛рж░ тАФ 24px рж╕рж╛рж░рзНржХрзБрж▓рж╛рж░ ржмрж╛ржЯржирзЗ ржкрж╛рж░ржлрзЗржХрзНржЯ рж╕рзЗржирзНржЯрж╛рж░рж┐ржВ ржирж┐рж╢рзНржЪрж┐рждред
  - ЁЯзн **Scrollbar:** ржорж┐ржирж┐ржорж╛рж▓ ржерж┐ржоржб рж╕рзНржХрзНрж░рж▓ржмрж╛рж░ ржмржЬрж╛рзЯ рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗ (Option A)ред
  - тЬи **Polish:** subtle hover/active ржЯрзНрж░рж╛ржиржЬрж┐рж╢ржи, ржмрж░рзНржбрж╛рж░/рж╢рзНржпрж╛ржбрзЛ ржлрж╛ржЗржи-ржЯрж┐ржЙржи, label hidden icon-only ржХржоржкрзНржпрж╛ржХрзНржЯ рж▓рзЗржЖржЙржЯред
  - ЁЯФ╣ **Context Menu Density Tweak:** ржорзЗржирзБрж░ ржнрж┐ржЬрзБржпрж╝рж╛рж▓ ржбрзЗржирж╕рж┐ржЯрж┐ рж╣рж╛рж▓ржХрж╛ ржЯрж╛ржЗржЯ тАФ ржЖржЗржХржи 16тЖТ15px, item gap/padding рж╕рж╛ржорж╛ржирзНржп ржХржорж╛ржирзЛ, shortcut pill padding ржХржорж╛ржирзЛ, ржПржмржВ overall font-size ~0.95emред
  - ЁЯУМ **Pin/Unpin Implementation:**
    - `extension/src/ui/MonicaStyleContextMenu.ts`: ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржорзЗ `button.item-pin` (hover/focus рж╕рзНржЯрж╛ржЗрж▓ рж╕рж╣) ржпрзЛржЧ; ржкрж┐ржи ржЯржЧрж▓ ржХрж░рж▓рзЗ `chrome.storage.sync`-ржП `'desainr.pinnedActions'` ржЖржкржбрзЗржЯ рж╣рзЯ ржПржмржВ `chrome.runtime.sendMessage({ type: 'SAVE_PINNED_ACTIONS', pinnedIds })` ржмрзНрж░ржбржХрж╛рж╕рзНржЯ ржХрж░рзЗред
    - рж╕рж░рзНржмрзЛржЪрзНржЪ 4ржЯрж┐ ржкрж┐ржи рж╕рзАржорж╛ ржПржиржлрзЛрж░рзНрж╕ржб (ржорзЗржирзБрждрзЗ ржЕрждрж┐рж░рж┐ржХрзНржд ржкрж┐ржи ржЯржЧрж▓рзЗ ржирзЛ-ржЕржк; UI рж╕рж╛ржмржЯрж▓ ржлрж┐ржбржмрзНржпрж╛ржХ ржкрж░рзЗ ржпрзЛржЧ ржХрж░рж╛ ржпрж╛ржмрзЗ)ред
    - `extension/src/ui/MonicaStyleToolbar.ts`: ржХржиржЯрзЗржХрзНрж╕ржЯ ржорзЗржирзБрж░ `DefaultActions` ржерзЗржХрзЗ ржлрзБрж▓ рж▓рж┐рж╕рзНржЯ ржмрзНржпржмрж╣рж╛рж░; `SAVE_PINNED_ACTIONS` рж▓рж┐рж╕рзЗржи ржХрж░рзЗ рж░рж┐-рж░рзЗржирзНржбрж╛рж░; `chrome.storage.sync` ржерзЗржХрзЗ ржкрж┐ржиржб ржЖржЗржбрж┐ рж▓рзЛржб ржХрж░рзЗ ржорзВрж▓ ржЕрж░рзНржбрж╛рж░рзЗ рж╕рж░рзНржмрзЛржЪрзНржЪ 4ржЯрж┐ ржкрж┐ржиржб ржЕрзНржпрж╛ржХрж╢ржи ржжрзЗржЦрж╛рзЯ; ржлрзНржпрж╛рж▓ржмрзНржпрж╛ржХ ржбрж┐ржлрж▓рзНржЯ: `refine, translate, rewrite, explain`ред
  - ЁЯФЦ **Pin Icon Polish (Context Menu):**
    - `extension/src/ui/MonicaStyleContextMenu.ts`: ржкрж┐ржи ржЯржЧрж▓ ржЖржЗржХржиржХрзЗ `FeatureIcons.memo` (Heroicons) ржП рж╕рзБржЗржЪ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред
    - ржЖржЗржХржи рж╕рж╛ржЗржЬ/рж╕рзНржЯрзНрж░рзЛржХ ржмрж┐ржжрзНржпржорж╛ржи рж╕рзНржЯрж╛ржЗрж▓рзЗржЗ ржХржирж╕рж┐рж╕рзНржЯрзЗржирзНржЯ рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗред
  - тЬЕ **Action Removal:** `Copy Selection (id: copy)` ржЕрзНржпрж╛ржХрж╢ржи `DefaultActions` ржерзЗржХрзЗ рж░рж┐ржорзБржнред
  - тЬЕ **Pin Limit:** `maxPinned` рзк тЖТ рзп ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ; ржЯржЧрж▓ рж▓ржЬрж┐ржХ ржкрзВрж░рзНржмрзЗрж░ ржорждрзЛ ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯ/ржмрзНрж░ржбржХрж╛рж╕рзНржЯ ржХрж░рзЗред
  - тЬЕ **Toolbar Compatibility:** ржЯрзБрж▓ржмрж╛рж░рзЗ рзп ржкрж░рзНржпржирзНржд ржкрж┐ржиржб рж▓рзЛржб/рж╕рж┐ржЩрзНржХ; рж░рзЛ-ржбрж┐рж╕ржкрзНрж▓рзЗ ржбрж┐ржлрж▓рзНржЯ рзк ржмржЬрж╛рзЯ; ржкрж┐ржи ржЖржЗржХржи ржХрзЗржмрж▓ ржкрж┐ржиржб рж╣рж▓рзЗ ржжрзЗржЦрж╛рзЯред
  - ЁЯОп **Pin Button Size Adjust:**
    - `extension/src/ui/MonicaStyleContextMenu.ts`: `.item-pin` ржмрж╛ржЯржирзЗрж░ рж╕рж╛ржЗржЬ 20├Ч20 тЖТ 24├Ч24 ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ, ржпрж╛рждрзЗ ржЕржирзНржпрж╛ржирзНржп ржмрж╛ржЯржирзЗрж░ (toolbar/more) рж╕рж╛ржерзЗ ржХржирж╕рж┐рж╕рзНржЯрзЗржирзНржЯ ржерж╛ржХрзЗред
    - ржнрж┐рждрж░рзЗрж░ SVG (memo) 16├Ч16; stroke-width 1.75 тАФ Heroicons outline рж╕рзНржЯрж╛ржЗрж▓рзЗ ржХржирж╕рж┐рж╕рзНржЯрзЗржирзНржЯред
  - тЬЕ **Pin Icon Visual State & A11y:**
    - ржХржиржЯрзЗржХрзНрж╕ржЯ ржорзЗржирзБрждрзЗ ржкрж┐ржи ржЖржЗржХржирзЗ pinned рж╣рж▓рзЗ filled state ржжрзЗржЦрж╛рзЯ (SVG-рждрзЗ `class="filled"` ржЯржЧрж▓); unpinned рж╣рж▓рзЗ outlineред
    - `button.item-pin`-ржП `aria-pressed` (true/false) рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗтАФржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕рж┐ржмрж┐рж▓рж┐ржЯрж┐ ржЙржирзНржирзЯржиред
  - тЬЕ **Toolbar Visible Buttons тЖТ 10:**
    - `MonicaStyleToolbar.ts`: ржЯрзБрж▓ржмрж╛рж░ ржПржЦржи рж╕рж░рзНржмрзЛржЪрзНржЪ рззрзжржЯрж┐ pinned ржЕрзНржпрж╛ржХрж╢ржи ржжрзЗржЦрж╛ржмрзЗ (рж╕рзНржЯрзЛрж░рзЗржЬ-ржЕрж░рзНржбрж╛рж░ ржЕржирзБржпрж╛ржпрж╝рзА)ред ржкрж┐ржи рж▓рж┐ржорж┐ржЯ ржЕржкрж░рж┐ржмрж░рзНрждрж┐ржд: рзпред
    - `chrome.storage.onChanged` рж▓рж┐рж╕рзЗржирж╛рж░ ржпрзЛржЧтАФржкрж┐ржи ржкрж░рж┐ржмрж░рзНрждржи рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ рж░рж┐ржлрзНрж░рзЗрж╢ рж╣ржмрзЗ; ржЕрж░рзНржбрж╛рж░ `desainr.pinnedActions` ржЕржирзБржпрж╛рзЯрзА рж░рзЗржирзНржбрж╛рж░ред
  - тЬЕ **Toolbar Persistence Fix (Popup stays open):**
    - `extension/src/ui/MonicaStyleToolbar.ts`: ржЕрзНржпрж╛ржХрж╢ржи ржХрзНрж▓рж┐ржХрзЗ `this.hide()` ржХрж▓ рж░рж┐ржорзБржн ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ (toolbar ржЖрж░ ржкрзНрж░рж┐ржорзНржпрж╛ржЪрж┐ржЙрж░ ржХрзНрж▓рзЛржЬ рж╣ржмрзЗ ржирж╛)ред
    - `More` ржорзЗржирзБ ржерзЗржХрзЗ ржЕрзНржпрж╛ржХрж╢ржи рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗ toolbar рж╣рж╛ржЗржб ржХрж░рж╛ рж╣ржмрзЗ ржирж╛; ржХрзЗржмрж▓ context menu ржирж┐ржЬрзЗ рж╣рж╛ржЗржб рж╣ржмрзЗред
    - Outside-click рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржПржЦржи `#desainr-result-popup`-ржПрж░ ржнрзЗрждрж░рзЗрж░ ржХрзНрж▓рж┐ржХ ржЗржЧржирзЛрж░ ржХрж░рзЗтАФржкржкржЖржкрзЗ ржЗржирзНржЯрж╛рж░тАНрзНржпрж╛ржХрзНржЯ ржХрж░рж▓рзЗ toolbar/popup рж╕рзНржерж┐рж░ ржерж╛ржХрзЗред

  ## Remainings
  - [ ] Toolbar рззрзж-ржЖржЗржЯрзЗржо рж▓рзЗржЖржЙржЯ: ржЫрзЛржЯ ржнрж┐ржЙржкрзЛрж░рзНржЯ/рж▓рзЛрзЯрж╛рж░ ржЬрзБржорзЗ ржУржнрж╛рж░ржлрзНрж▓рзЛ/ржХрзНрж▓рж┐ржкрж┐ржВ QA
  - [ ] Popup QA: рж╕ржм ржЕрзНржпрж╛ржХрж╢ржитАФ'WorkingтАж' тЖТ ржлрж▓рж╛ржлрж▓/ржПрж░рж░, Replace/Copy ржЖржЪрж░ржг рж╕ржарж┐ржХ ржХрж┐ржирж╛; toolbar/popup ржХрж┐ ржПржЦржи рж╕рзНржерж┐рждрж┐рж╢рзАрж▓ ржерж╛ржХржЫрзЗ?
  - [ ] Error/timeout UX: concise ржХржкрж┐-ржпрзЛржЧрзНржп ржорзЗрж╕рзЗржЬ; Replace ржмрж╛ржЯржирзЗ ржЧрж╛рж░рзНржб (ржПрж░рж░ ржЯрзЗржХрзНрж╕ржЯ рж░рж┐ржкрзНрж▓рзЗрж╕ ржкрзНрж░рждрж┐рж░рзЛржз)
  - [ ] Cross-site: Docs/Gmail/News/GitHub + RTL/zoom ржерж┐ржорзЗ ржкржЬрж┐рж╢ржи ржмрж╛ржЙржирзНржбрж┐ржВ
  - [ ] Pin icon clarity: 90тАУ125% zoom + Light/Dark; `.item-pin` 24├Ч24 + SVG 16px ржпрж╛ржЪрж╛ржЗ
  - [ ] A11y: keyboard nav (Tab/Enter/Escape), focus ring, aria-pressed
  - [ ] Broadcast/persistence: `SAVE_PINNED_ACTIONS` path + storage sync quota
  - [ ] Analyze ржЖржЗржХржи cube (Heroicons) ржХржирж╕рж┐рж╕рзНржЯрзЗржирзНрж╕рж┐ ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи
  - [ ] "Extension context invalidated" рж░рзБржЯ-ржХржЬ ржЯрзНрж░рж╛рзЯрж╛ржЬ: background lifecycle, messaging, import chunk availability
  
  ## Next Steps
  1. MagicInput ржЪрж╛рж▓рзБ (ржПржЦржи): рж╕ржХрж▓ ржЯрзБрж▓ржмрж╛рж░ ржЕрзНржпрж╛ржХрж╢ржирзЗрж░ рж╕рзНржкрзНрж▓рж┐ржЯ-ржкржкржЖржк/рж╕рзНржЯрзЗржмрж┐рж▓рж┐ржЯрж┐/ржПрж░рж░-рж░рж┐ржкрзЛрж░рзНржЯ рж╕ржорзНржкрж░рзНржХрзЗ ржЗржЙржЬрж╛рж░ ржлрж┐ржбржмрзНржпрж╛ржХ рж╕ржВржЧрзНрж░рж╣ред
     - рж░рж┐ржкрзЛрж░рзНржЯ ржХрж░рзБржи: ржХрзЛржи ржмрж╛ржЯржи ржХрж╛ржЬ ржХрж░рзЗржЫрзЗ/ржХрж░рзЗржирж┐ (Refine/Translate/Rewrite/Expand/Correct/Explain/Analyze)
     - ржкржкржЖржк ржХрж┐ ржУржкрзЗржи ржерзЗржХрзЗржЫрзЗ ржирж╛ржХрж┐ ржЯрзБрж▓ржмрж╛рж░ ржЕржкрзНрж░рждрзНржпрж╛рж╢рж┐рждржнрж╛ржмрзЗ ржХрзНрж▓рзЛржЬ рж╣рзЯрзЗржЫрзЗ?
     - "WorkingтАж" ржжрзЗржЦрж┐рзЯрзЗржЫрзЗ ржХрж┐? ржлрж▓рж╛ржлрж▓/ржПрж░рж░ ржЯрзЗржХрзНрж╕ржЯ ржХрзА ржЫрж┐рж▓?
     - Console error/log ржерж╛ржХрж▓рзЗ ржХржкрж┐ ржжрж┐ржи
     - ржкрзЗржЬ URL + рж╕рж╛ржЗржЯ ржЯрж╛ржЗржк, ржЬрзБржо %, ржерж┐ржо; рж╕рж┐рж▓рзЗржХрж╢ржирзЗрж░ ржЖржирзБржорж╛ржирж┐ржХ ржжрзИрж░рзНржШрзНржп
     - рж░рж┐ржкрзНрж░рзЛ рж╕рзНржЯрзЗржкрж╕ рж╕ржВржХрзНрж╖рзЗржкрзЗ
     - Network ржЯрзНржпрж╛ржмрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржлрж╛рзЯрж╛рж░ рж╣рзЯрзЗржЫрзЗ ржХрж┐? (ржпржжрж┐ Refine ржХрж╛ржЬ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ ржЕржирзНржпржЧрзБрж▓рзЛ ржирж╛ рж╣рзЯ)
  2. рж░рж┐ржкрзЛрж░рзНржЯрзЗржб ржЗрж╕рзНржпрзБржЧрзБрж▓рзЛ рж░рж┐ржкрзНрж░рзЛржбрж┐ржЙрж╕ тЖТ ржлрж┐ржХрзНрж╕ тЖТ рж░рж┐ржмрж┐рж▓рзНржб (Vite) тЖТ Chrome-ржП рж░рж┐рж▓рзЛржбред
  3. Cross-site QA + ржерж┐ржо/ржЬрзБржо ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗрж╢ржи + ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯрзЗржирзНрж╕ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржиред

  ## Asking (Optional)
  - рж╕рзНржкрзНрж▓рж┐ржЯ-ржкржкржЖржк: Replace ржХрж┐ рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж▓рзЗржХрж╢ржи рж░рж┐ржкрзНрж▓рзЗрж╕ ржХрж░ржмрзЗ? рж▓рж┐ржбрж┐ржВ/ржЯрзНрж░рзЗржЗрж▓рж┐ржВ whitespace ржХрж┐ ржЯрзНрж░рж┐ржо ржХрж░ржм? (ржкржЫржирзНржж ржЬрж╛ржирж╛ржи)
  - Translate/Rewrite/Explain/Correct/Expand ржлрж▓рж╛ржлрж▓тАФржбрж╛ржи ржкрзНржпрж╛ржирзЗрж▓рзЗ рж╢рж┐рж░рзЛржирж╛ржо/рж▓рзЗржмрзЗрж▓рж┐ржВ ржХрзЗржоржи рж▓рж╛ржЧржЫрзЗ? (ржкрж░рж┐ржмрж░рзНрждржи ржЪрж╛ржЗрж▓рзЗ рж▓рж┐ржЦрзБржи)
  - рж╕рж░рзНржмрзЛржЪрзНржЪ ржкрж┐ржи рж▓рж┐ржорж┐ржЯ рзптАФржХржиржлрж╛рж░рзНржо? ржбрж┐ржлрж▓рзНржЯ pinned рзк ржерж╛ржХржмрзЗред (Yes/No)
  - Analyze ржЖржЗржХржи cube (Heroicons) ржарж┐ржХ ржЖржЫрзЗ? (Yes/No)
  - "Extension context invalidated" ржПрж░рж░ ржХрж┐ ржПржЦржиржУ ржжрзЗржЦржЫрзЗржи? ржХрзЛржи ржЕрзНржпрж╛ржХрж╢ржирзЗ/ржХрзЛржи ржкрзЗржЬрзЗ ржШржЯржЫрзЗ, ржПржмржВ ржХржирж╕рзЛрж▓рзЗ ржЕрждрж┐рж░рж┐ржХрзНржд рж▓ржЧ ржЖржЫрзЗ ржХрж┐?
  - ржХрзЛржирзЛ misalignment/overflow/contrast ржЗрж╕рзНржпрзБ ржжрзЗржЦрж▓рзЗ ржкрзЗржЬ ржирж╛ржо + ржЬрзБржо + ржерж┐ржо ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рзБржиред
 
 ржирзЛржЯ (ржХржиржлрж╛рж░рзНржоржб):
 - Extension ID: `eegcjohemdmfmpchimblddocnhpfkgce`
 - Firebase Authorized domains: `localhost`, `127.0.0.1`, `desainr.vercel.app`, `eegcjohemdmfmpchimblddocnhpfkgce.chromiumapp.org`
